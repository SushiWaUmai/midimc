var Jn=Object.defineProperty;var Gn=(t,e,r)=>e in t?Jn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Je=(t,e,r)=>(Gn(t,typeof e!="symbol"?e+"":e,r),r),Cr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var E=(t,e,r)=>(Cr(t,e,"read from private field"),r?r.call(t):e.get(t)),se=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ye=(t,e,r,i)=>(Cr(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var M=(t,e,r)=>(Cr(t,e,"access private method"),r);import{S as Wn,i as zn,s as Yn,k as Ge,q as dr,a as Wt,l as We,m as nt,r as pr,h as Re,c as zt,n as Le,b as mr,C as _e,Q as dn,D as Ar,u as Xn}from"../chunks/index.590095e2.js";var pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(e,s);return new o}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var Bt={},br={};function $n(t){var e=new we(t),r=e.readChunk();if(r.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+r.id+"'";for(var i=Zn(r.data),s=[],o=0;!e.eof()&&o<i.numTracks;o++){var n=e.readChunk();if(n.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+n.id+"'";var l=Qn(n.data);s.push(l)}return{header:i,tracks:s}}function Zn(t){var e=new we(t),r=e.readUInt16(),i=e.readUInt16(),s={format:r,numTracks:i},o=e.readUInt16();return o&32768?(s.framesPerSecond=256-(o>>8),s.ticksPerFrame=o&255):s.ticksPerBeat=o,s}function Qn(t){for(var e=new we(t),r=[];!e.eof();){var i=o();r.push(i)}return r;var s;function o(){var n={};n.deltaTime=e.readVarInt();var l=e.readUInt8();if((l&240)===240)if(l===255){n.meta=!0;var c=e.readUInt8(),u=e.readVarInt();switch(c){case 0:if(n.type="sequenceNumber",u!==2)throw"Expected length for sequenceNumber event is 2, got "+u;return n.number=e.readUInt16(),n;case 1:return n.type="text",n.text=e.readString(u),n;case 2:return n.type="copyrightNotice",n.text=e.readString(u),n;case 3:return n.type="trackName",n.text=e.readString(u),n;case 4:return n.type="instrumentName",n.text=e.readString(u),n;case 5:return n.type="lyrics",n.text=e.readString(u),n;case 6:return n.type="marker",n.text=e.readString(u),n;case 7:return n.type="cuePoint",n.text=e.readString(u),n;case 32:if(n.type="channelPrefix",u!=1)throw"Expected length for channelPrefix event is 1, got "+u;return n.channel=e.readUInt8(),n;case 33:if(n.type="portPrefix",u!=1)throw"Expected length for portPrefix event is 1, got "+u;return n.port=e.readUInt8(),n;case 47:if(n.type="endOfTrack",u!=0)throw"Expected length for endOfTrack event is 0, got "+u;return n;case 81:if(n.type="setTempo",u!=3)throw"Expected length for setTempo event is 3, got "+u;return n.microsecondsPerBeat=e.readUInt24(),n;case 84:if(n.type="smpteOffset",u!=5)throw"Expected length for smpteOffset event is 5, got "+u;var B=e.readUInt8(),w={0:24,32:25,64:29,96:30};return n.frameRate=w[B&96],n.hour=B&31,n.min=e.readUInt8(),n.sec=e.readUInt8(),n.frame=e.readUInt8(),n.subFrame=e.readUInt8(),n;case 88:if(n.type="timeSignature",u!=2&&u!=4)throw"Expected length for timeSignature event is 4 or 2, got "+u;return n.numerator=e.readUInt8(),n.denominator=1<<e.readUInt8(),u===4?(n.metronome=e.readUInt8(),n.thirtyseconds=e.readUInt8()):(n.metronome=36,n.thirtyseconds=8),n;case 89:if(n.type="keySignature",u!=2)throw"Expected length for keySignature event is 2, got "+u;return n.key=e.readInt8(),n.scale=e.readUInt8(),n;case 127:return n.type="sequencerSpecific",n.data=e.readBytes(u),n;default:return n.type="unknownMeta",n.data=e.readBytes(u),n.metatypeByte=c,n}}else if(l==240){n.type="sysEx";var u=e.readVarInt();return n.data=e.readBytes(u),n}else if(l==247){n.type="endSysEx";var u=e.readVarInt();return n.data=e.readBytes(u),n}else throw"Unrecognised MIDI event type byte: "+l;else{var d;if(l&128)d=e.readUInt8(),s=l;else{if(s===null)throw"Running status byte encountered before status byte";d=l,l=s,n.running=!0}var x=l>>4;switch(n.channel=l&15,x){case 8:return n.type="noteOff",n.noteNumber=d,n.velocity=e.readUInt8(),n;case 9:var S=e.readUInt8();return n.type=S===0?"noteOff":"noteOn",n.noteNumber=d,n.velocity=S,S===0&&(n.byte9=!0),n;case 10:return n.type="noteAftertouch",n.noteNumber=d,n.amount=e.readUInt8(),n;case 11:return n.type="controller",n.controllerType=d,n.value=e.readUInt8(),n;case 12:return n.type="programChange",n.programNumber=d,n;case 13:return n.type="channelAftertouch",n.amount=d,n;case 14:return n.type="pitchBend",n.value=d+(e.readUInt8()<<7)-8192,n;default:throw"Unrecognised MIDI event type: "+x}}}}function we(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}we.prototype.eof=function(){return this.pos>=this.bufferLen};we.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t};we.prototype.readInt8=function(){var t=this.readUInt8();return t&128?t-256:t};we.prototype.readUInt16=function(){var t=this.readUInt8(),e=this.readUInt8();return(t<<8)+e};we.prototype.readInt16=function(){var t=this.readUInt16();return t&32768?t-65536:t};we.prototype.readUInt24=function(){var t=this.readUInt8(),e=this.readUInt8(),r=this.readUInt8();return(t<<16)+(e<<8)+r};we.prototype.readInt24=function(){var t=this.readUInt24();return t&8388608?t-16777216:t};we.prototype.readUInt32=function(){var t=this.readUInt8(),e=this.readUInt8(),r=this.readUInt8(),i=this.readUInt8();return(t<<24)+(e<<16)+(r<<8)+i};we.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e};we.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)};we.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(e&128)t+=e&127,t<<=7;else return t+e}return t};we.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),r=this.readBytes(e);return{id:t,length:e,data:r}};var ei=$n;function ti(t,e){if(typeof t!="object")throw"Invalid MIDI data";e=e||{};var r=t.header||{},i=t.tracks||[],s,o=i.length,n=new le;for(ri(n,r,o),s=0;s<o;s++)ni(n,i[s],e);return n.buffer}function ri(t,e,r){var i=e.format==null?1:e.format,s=128;e.timeDivision?s=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?s=-(e.framesPerSecond&255)<<8|e.ticksPerFrame&255:e.ticksPerBeat&&(s=e.ticksPerBeat&32767);var o=new le;o.writeUInt16(i),o.writeUInt16(r),o.writeUInt16(s),t.writeChunk("MThd",o.buffer)}function ni(t,e,r){var i=new le,s,o=e.length,n=null;for(s=0;s<o;s++)(r.running===!1||!r.running&&!e[s].running)&&(n=null),n=ii(i,e[s],n,r.useByte9ForNoteOff);t.writeChunk("MTrk",i.buffer)}function ii(t,e,r,i){var s=e.type,o=e.deltaTime,n=e.text||"",l=e.data||[],c=null;switch(t.writeVarInt(o),s){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(n.length),t.writeString(n);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(n.length),t.writeString(n);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(n.length),t.writeString(n);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(n.length),t.writeString(n);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(n.length),t.writeString(n);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(n.length),t.writeString(n);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(n.length),t.writeString(n);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u={24:0,25:32,29:64,30:96},B=e.hour&31|u[e.frameRate];t.writeUInt8(B),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var w=Math.floor(Math.log(e.denominator)/Math.LN2)&255;t.writeUInt8(w),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(l.length),t.writeBytes(l);break;case"unknownMeta":e.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(l.length),t.writeBytes(l));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(l.length),t.writeBytes(l);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(l.length),t.writeBytes(l);break;case"noteOff":var d=i!==!1&&e.byte9||i&&e.velocity==0?144:128;c=d|e.channel,c!==r&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":c=144|e.channel,c!==r&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":c=160|e.channel,c!==r&&t.writeUInt8(c),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":c=176|e.channel,c!==r&&t.writeUInt8(c),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":c=192|e.channel,c!==r&&t.writeUInt8(c),t.writeUInt8(e.programNumber);break;case"channelAftertouch":c=208|e.channel,c!==r&&t.writeUInt8(c),t.writeUInt8(e.amount);break;case"pitchBend":c=224|e.channel,c!==r&&t.writeUInt8(c);var x=8192+e.value,S=x&127,O=x>>7&127;t.writeUInt8(S),t.writeUInt8(O);break;default:throw"Unrecognized event type: "+s}return c}function le(){this.buffer=[]}le.prototype.writeUInt8=function(t){this.buffer.push(t&255)};le.prototype.writeInt8=le.prototype.writeUInt8;le.prototype.writeUInt16=function(t){var e=t>>8&255,r=t&255;this.writeUInt8(e),this.writeUInt8(r)};le.prototype.writeInt16=le.prototype.writeUInt16;le.prototype.writeUInt24=function(t){var e=t>>16&255,r=t>>8&255,i=t&255;this.writeUInt8(e),this.writeUInt8(r),this.writeUInt8(i)};le.prototype.writeInt24=le.prototype.writeUInt24;le.prototype.writeUInt32=function(t){var e=t>>24&255,r=t>>16&255,i=t>>8&255,s=t&255;this.writeUInt8(e),this.writeUInt8(r),this.writeUInt8(i),this.writeUInt8(s)};le.prototype.writeInt32=le.prototype.writeUInt32;le.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))};le.prototype.writeString=function(t){var e,r=t.length,i=[];for(e=0;e<r;e++)i.push(t.codePointAt(e));this.writeBytes(i)};le.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,r=[];for(r.push(e&127),e>>=7;e;){var i=e&127|128;r.push(i),e>>=7}this.writeBytes(r.reverse())}};le.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)};var ai=ti;br.parseMidi=ei;br.writeMidi=ai;var er={},ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.insert=ct.search=void 0;function pn(t,e,r){r===void 0&&(r="ticks");var i=0,s=t.length,o=s;if(s>0&&t[s-1][r]<=e)return s-1;for(;i<o;){var n=Math.floor(i+(o-i)/2),l=t[n],c=t[n+1];if(l[r]===e){for(var u=n;u<t.length;u++){var B=t[u];B[r]===e&&(n=u)}return n}else{if(l[r]<e&&c[r]>e)return n;l[r]>e?o=n:l[r]<e&&(i=n+1)}}return-1}ct.search=pn;function si(t,e,r){if(r===void 0&&(r="ticks"),t.length){var i=pn(t,e[r],r);t.splice(i+1,0,e)}else t.push(e)}ct.insert=si;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.keySignatureKeys=void 0;var e=ct,r=new WeakMap;t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var i=function(){function s(o){var n=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",r.set(this,480),o){r.set(this,o.header.ticksPerBeat),o.tracks.forEach(function(c){c.forEach(function(u){u.meta&&(u.type==="timeSignature"?n.timeSignatures.push({ticks:u.absoluteTime,timeSignature:[u.numerator,u.denominator]}):u.type==="setTempo"?n.tempos.push({bpm:6e7/u.microsecondsPerBeat,ticks:u.absoluteTime}):u.type==="keySignature"&&n.keySignatures.push({key:t.keySignatureKeys[u.key+7],scale:u.scale===0?"major":"minor",ticks:u.absoluteTime}))})});var l=0;o.tracks[0].forEach(function(c){l+=c.deltaTime,c.meta&&(c.type==="trackName"?n.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&n.meta.push({text:c.text,ticks:l,type:c.type}))}),this.update()}}return s.prototype.update=function(){var o=this,n=0,l=0;this.tempos.sort(function(c,u){return c.ticks-u.ticks}),this.tempos.forEach(function(c,u){var B=u>0?o.tempos[u-1].bpm:o.tempos[0].bpm,w=c.ticks/o.ppq-l,d=60/B*w;c.time=d+n,n=c.time,l+=w}),this.timeSignatures.sort(function(c,u){return c.ticks-u.ticks}),this.timeSignatures.forEach(function(c,u){var B=u>0?o.timeSignatures[u-1]:o.timeSignatures[0],w=(c.ticks-B.ticks)/o.ppq,d=w/B.timeSignature[0]/(B.timeSignature[1]/4);B.measures=B.measures||0,c.measures=d+B.measures})},s.prototype.ticksToSeconds=function(o){var n=(0,e.search)(this.tempos,o);if(n!==-1){var l=this.tempos[n],c=l.time,u=(o-l.ticks)/this.ppq;return c+60/l.bpm*u}else{var B=o/this.ppq;return 60/120*B}},s.prototype.ticksToMeasures=function(o){var n=(0,e.search)(this.timeSignatures,o);if(n!==-1){var l=this.timeSignatures[n],c=(o-l.ticks)/this.ppq;return l.measures+c/(l.timeSignature[0]/l.timeSignature[1])/4}else return o/this.ppq/4},Object.defineProperty(s.prototype,"ppq",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),s.prototype.secondsToTicks=function(o){var n=(0,e.search)(this.tempos,o,"time");if(n!==-1){var l=this.tempos[n],c=l.time,u=o-c,B=u/(60/l.bpm);return Math.round(l.ticks+B*this.ppq)}else{var w=o/.5;return Math.round(w*this.ppq)}},s.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(o){return{bpm:o.bpm,ticks:o.ticks}}),timeSignatures:this.timeSignatures}},s.prototype.fromJSON=function(o){this.name=o.name,this.tempos=o.tempos.map(function(n){return Object.assign({},n)}),this.timeSignatures=o.timeSignatures.map(function(n){return Object.assign({},n)}),this.keySignatures=o.keySignatures.map(function(n){return Object.assign({},n)}),this.meta=o.meta.map(function(n){return Object.assign({},n)}),r.set(this,o.ppq),this.update()},s.prototype.setTempo=function(o){this.tempos=[{bpm:o,ticks:0}],this.update()},s}();t.Header=i})(er);var Ut={},Gr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(s,o){return s[t.controlChangeNames[o]]=o,s},{});var e=new WeakMap,r=new WeakMap,i=function(){function s(o,n){e.set(this,n),r.set(this,o.controllerType),this.ticks=o.absoluteTime,this.value=o.value}return Object.defineProperty(s.prototype,"number",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"time",{get:function(){var o=e.get(this);return o.ticksToSeconds(this.ticks)},set:function(o){var n=e.get(this);this.ticks=n.secondsToTicks(o)},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},s}();t.ControlChange=i})(Gr);var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.createControlChanges=void 0;var Yt=Gr;function oi(){return new Proxy({},{get:function(t,e){if(t[e])return t[e];if(Yt.controlChangeIds.hasOwnProperty(e))return t[Yt.controlChangeIds[e]]},set:function(t,e,r){return Yt.controlChangeIds.hasOwnProperty(e)?t[Yt.controlChangeIds[e]]=r:t[e]=r,!0}})}yr.createControlChanges=oi;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.PitchBend=void 0;var Fr=new WeakMap,ci=function(){function t(e,r){Fr.set(this,r),this.ticks=e.absoluteTime,this.value=e.value}return Object.defineProperty(t.prototype,"time",{get:function(){var e=Fr.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var r=Fr.get(this);this.ticks=r.secondsToTicks(e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();vr.PitchBend=ci;var gr={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.DrumKitByPatchID=it.InstrumentFamilyByID=it.instrumentByPatchID=void 0;it.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];it.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];it.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(gr,"__esModule",{value:!0});gr.Instrument=void 0;var Xt=it,cn=new WeakMap,fi=function(){function t(e,r){if(this.number=0,cn.set(this,r),this.number=0,e){var i=e.find(function(s){return s.type==="programChange"});i&&(this.number=i.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?Xt.DrumKitByPatchID[this.number]:Xt.instrumentByPatchID[this.number]},set:function(e){var r=Xt.instrumentByPatchID.indexOf(e);r!==-1&&(this.number=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":Xt.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){var e=cn.get(this);return e.channel===9},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(e){this.number=e.number},t}();gr.Instrument=fi;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.Note=void 0;function ui(t){var e=Math.floor(t/12)-1;return mn(t)+e.toString()}function mn(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=t%12;return e[r]}function li(t){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return e.indexOf(t)}var hi=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(r){var i=t.exec(r),s=i[1],o=i[2],n=e[s.toLowerCase()];return n+(parseInt(o,10)+1)*12}}(),dt=new WeakMap,di=function(){function t(e,r,i){dt.set(this,i),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=r.velocity,this.ticks=e.ticks,this.durationTicks=r.ticks-e.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return ui(this.midi)},set:function(e){this.midi=hi(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(e){var r=e-this.octave;this.midi+=r*12},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return mn(this.midi)},set:function(e){this.midi=12*(this.octave+1)+li(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=dt.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)},set:function(e){var r=dt.get(this),i=r.secondsToTicks(this.time+e);this.durationTicks=i-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){var e=dt.get(this);return e.ticksToSeconds(this.ticks)},set:function(e){var r=dt.get(this);this.ticks=r.secondsToTicks(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){var e=dt.get(this);return e.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();xr.Note=di;Object.defineProperty(Ut,"__esModule",{value:!0});Ut.Track=void 0;var Mr=ct,pi=Gr,mi=yr,bi=vr,fn=gr,yi=xr,Kt=new WeakMap,vi=function(){function t(e,r){var i=this;if(this.name="",this.notes=[],this.controlChanges=(0,mi.createControlChanges)(),this.pitchBends=[],Kt.set(this,r),e){var s=e.find(function(d){return d.type==="trackName"});this.name=s?s.text:""}if(this.instrument=new fn.Instrument(e,this),this.channel=0,e){for(var o=e.filter(function(d){return d.type==="noteOn"}),n=e.filter(function(d){return d.type==="noteOff"}),l=function(){var d=o.shift();c.channel=d.channel;var x=n.findIndex(function(O){return O.noteNumber===d.noteNumber&&O.absoluteTime>=d.absoluteTime});if(x!==-1){var S=n.splice(x,1)[0];c.addNote({durationTicks:S.absoluteTime-d.absoluteTime,midi:d.noteNumber,noteOffVelocity:S.velocity/127,ticks:d.absoluteTime,velocity:d.velocity/127})}},c=this;o.length;)l();var u=e.filter(function(d){return d.type==="controller"});u.forEach(function(d){i.addCC({number:d.controllerType,ticks:d.absoluteTime,value:d.value/127})});var B=e.filter(function(d){return d.type==="pitchBend"});B.forEach(function(d){i.addPitchBend({ticks:d.absoluteTime,value:d.value/Math.pow(2,13)})});var w=e.find(function(d){return d.type==="endOfTrack"});this.endOfTrackTicks=w!==void 0?w.absoluteTime:void 0}}return t.prototype.addNote=function(e){var r=Kt.get(this),i=new yi.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},r);return Object.assign(i,e),(0,Mr.insert)(this.notes,i,"ticks"),this},t.prototype.addCC=function(e){var r=Kt.get(this),i=new pi.ControlChange({controllerType:e.number},r);return delete e.number,Object.assign(i,e),Array.isArray(this.controlChanges[i.number])||(this.controlChanges[i.number]=[]),(0,Mr.insert)(this.controlChanges[i.number],i,"ticks"),this},t.prototype.addPitchBend=function(e){var r=Kt.get(this),i=new bi.PitchBend({},r);return Object.assign(i,e),(0,Mr.insert)(this.pitchBends,i,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,r=0;r<this.notes.length-1;r++){var i=this.notes[r].time+this.notes[r].duration;e<i&&(e=i)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,r=0;r<this.notes.length-1;r++){var i=this.notes[r].ticks+this.notes[r].durationTicks;e<i&&(e=i)}return e},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(e){var r=this;this.name=e.name,this.channel=e.channel,this.instrument=new fn.Instrument(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(var i in e.controlChanges)e.controlChanges[i]&&e.controlChanges[i].forEach(function(s){r.addCC({number:s.number,ticks:s.ticks,value:s.value})});e.notes.forEach(function(s){r.addNote({durationTicks:s.durationTicks,midi:s.midi,ticks:s.ticks,velocity:s.velocity})})},t.prototype.toJSON=function(){for(var e={},r=0;r<127;r++)this.controlChanges.hasOwnProperty(r)&&(e[r]=this.controlChanges[r].map(function(s){return s.toJSON()}));var i={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(function(s){return s.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(s){return s.toJSON()})};return this.endOfTrackTicks!==void 0&&(i.endOfTrackTicks=this.endOfTrackTicks),i},t}();Ut.Track=vi;var kr={};function gi(t){var e=[];return bn(t,e),e}function bn(t,e){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?bn(i,e):e.push(i)}}const xi=Object.freeze(Object.defineProperty({__proto__:null,flatten:gi},Symbol.toStringTag,{value:"Module"})),ki=Kn(xi);var rt=pt&&pt.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(kr,"__esModule",{value:!0});kr.encode=void 0;var wi=br,_i=er,Ii=ki;function Ti(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(t.velocity*127)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(t.noteOffVelocity*127)}]}function Si(t){return(0,Ii.flatten)(t.notes.map(function(e){return Ti(e,t.channel)}))}function Bi(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(t.value*127)}}function Ui(t){for(var e=[],r=0;r<127;r++)t.controlChanges.hasOwnProperty(r)&&t.controlChanges[r].forEach(function(i){e.push(Bi(i,t.channel))});return e}function Oi(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}function Ei(t){var e=[];return t.pitchBends.forEach(function(r){e.push(Oi(r,t.channel))}),e}function Ni(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}function Ci(t){return{absoluteTime:0,deltaTime:0,meta:!0,text:t,type:"trackName"}}function Fi(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}function Mi(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function Ai(t){var e=_i.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:t.scale==="major"?0:1,type:"keySignature"}}function Pi(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}function Di(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:rt([rt(rt(rt(rt([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(r){return Ai(r)}),!0),t.header.meta.map(function(r){return Pi(r)}),!0),t.header.tempos.map(function(r){return Fi(r)}),!0),t.header.timeSignatures.map(function(r){return Mi(r)}),!0)],t.tracks.map(function(r){return rt(rt(rt([Ci(r.name),Ni(r)],Si(r),!0),Ui(r),!0),Ei(r),!0)}),!0)};return e.tracks=e.tracks.map(function(r){r=r.sort(function(s,o){return s.absoluteTime-o.absoluteTime});var i=0;return r.forEach(function(s){s.deltaTime=s.absoluteTime-i,i=s.absoluteTime,delete s.absoluteTime}),r.push({deltaTime:0,meta:!0,type:"endOfTrack"}),r}),new Uint8Array((0,wi.writeMidi)(e))}kr.encode=Di;(function(t){var e=pt&&pt.__awaiter||function(w,d,x,S){function O(k){return k instanceof x?k:new x(function(q){q(k)})}return new(x||(x=Promise))(function(k,q){function F(_){try{h(S.next(_))}catch(U){q(U)}}function P(_){try{h(S.throw(_))}catch(U){q(U)}}function h(_){_.done?k(_.value):O(_.value).then(F,P)}h((S=S.apply(w,d||[])).next())})},r=pt&&pt.__generator||function(w,d){var x={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},S,O,k,q;return q={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function F(h){return function(_){return P([h,_])}}function P(h){if(S)throw new TypeError("Generator is already executing.");for(;x;)try{if(S=1,O&&(k=h[0]&2?O.return:h[0]?O.throw||((k=O.return)&&k.call(O),0):O.next)&&!(k=k.call(O,h[1])).done)return k;switch(O=0,k&&(h=[h[0]&2,k.value]),h[0]){case 0:case 1:k=h;break;case 4:return x.label++,{value:h[1],done:!1};case 5:x.label++,O=h[1],h=[0];continue;case 7:h=x.ops.pop(),x.trys.pop();continue;default:if(k=x.trys,!(k=k.length>0&&k[k.length-1])&&(h[0]===6||h[0]===2)){x=0;continue}if(h[0]===3&&(!k||h[1]>k[0]&&h[1]<k[3])){x.label=h[1];break}if(h[0]===6&&x.label<k[1]){x.label=k[1],k=h;break}if(k&&x.label<k[2]){x.label=k[2],x.ops.push(h);break}k[2]&&x.ops.pop(),x.trys.pop();continue}h=d.call(w,x)}catch(_){h=[6,_],O=0}finally{S=k=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=t.Track=t.Midi=void 0;var i=br,s=er,o=Ut,n=kr,l=function(){function w(d){var x=this,S=null;if(d){var O=d instanceof ArrayBuffer?new Uint8Array(d):d;S=(0,i.parseMidi)(O),S.tracks.forEach(function(k){var q=0;k.forEach(function(F){q+=F.deltaTime,F.absoluteTime=q})}),S.tracks=B(S.tracks)}this.header=new s.Header(S),this.tracks=[],d&&(this.tracks=S.tracks.map(function(k){return new o.Track(k,x.header)}),S.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return w.fromUrl=function(d){return e(this,void 0,void 0,function(){var x,S;return r(this,function(O){switch(O.label){case 0:return[4,fetch(d)];case 1:return x=O.sent(),x.ok?[4,x.arrayBuffer()]:[3,3];case 2:return S=O.sent(),[2,new w(S)];case 3:throw new Error("Could not load '".concat(d,"'"))}})})},Object.defineProperty(w.prototype,"name",{get:function(){return this.header.name},set:function(d){this.header.name=d},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"duration",{get:function(){var d=this.tracks.map(function(x){return x.duration});return Math.max.apply(Math,d)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"durationTicks",{get:function(){var d=this.tracks.map(function(x){return x.durationTicks});return Math.max.apply(Math,d)},enumerable:!1,configurable:!0}),w.prototype.addTrack=function(){var d=new o.Track(void 0,this.header);return this.tracks.push(d),d},w.prototype.toArray=function(){return(0,n.encode)(this)},w.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(d){return d.toJSON()})}},w.prototype.fromJSON=function(d){var x=this;this.header=new s.Header,this.header.fromJSON(d.header),this.tracks=d.tracks.map(function(S){var O=new o.Track(void 0,x.header);return O.fromJSON(S),O})},w.prototype.clone=function(){var d=new w;return d.fromJSON(this.toJSON()),d},w}();t.Midi=l;var c=Ut;Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return c.Track}});var u=er;Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return u.Header}});function B(w){for(var d=[],x=0;x<w.length;x++)for(var S=d.length,O=new Map,k=Array(16).fill(0),q=0,F=w[x];q<F.length;q++){var P=F[q],h=S,_=P.channel;if(_!==void 0){P.type==="programChange"&&(k[_]=P.programNumber);var U=k[_],J="".concat(U," ").concat(_);O.has(J)?h=O.get(J):(h=S+O.size,O.set(J,h))}d[h]||d.push([]),d[h].push(P)}return d}})(Bt);class Li extends Number{constructor(e){const[r]=new Int8Array([e]);super(r)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Byte"}}class Zt extends Number{constructor(e){const[r]=new Int16Array([e]);super(r)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Short"}}class ot extends Number{constructor(e){const[r]=new Int32Array([e]);super(r)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Int"}}class Ri extends Number{constructor(e){const[r]=new Float32Array([e]);super(r)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Float"}}class Ft{constructor(e,{name:r,endian:i,compression:s,bedrockLevel:o}={}){if(e instanceof Ft&&(r===void 0&&(r=e.name),i===void 0&&(i=e.endian),s===void 0&&(s=e.compression),o===void 0&&(o=e.bedrockLevel),e=e.data),r===void 0&&(r=""),i===void 0&&(i="big"),s===void 0&&(s=null),o===void 0&&(o=null),typeof e!="object"||e===null)throw new TypeError("First parameter must be an object");if(typeof r!="string"&&r!==null)throw new TypeError("Name option must be a string or null");if(i!=="big"&&i!=="little")throw new TypeError("Endian option must be a valid endian type");if(s!==null&&s!=="gzip"&&s!=="deflate")throw new TypeError("Compression option must be a valid compression type");if(o!==null&&!(o instanceof ot))throw new TypeError("Bedrock Level option must be an Int");this.data=e,this.name=r,this.endian=i,s!==null&&(this.compression=s),o!==null&&(this.bedrockLevel=o),Object.freeze(this)}get[Symbol.toStringTag](){return"NBTData"}}const $={END:0,BYTE:1,SHORT:2,INT:3,LONG:4,FLOAT:5,DOUBLE:6,BYTE_ARRAY:7,STRING:8,LIST:9,COMPOUND:10,INT_ARRAY:11,LONG_ARRAY:12};Object.freeze($);function Tt(t){switch(!0){case t instanceof Li:case typeof t=="boolean":return $.BYTE;case t instanceof Zt:return $.SHORT;case t instanceof ot:return $.INT;case typeof t=="bigint":return $.LONG;case t instanceof Ri:return $.FLOAT;case typeof t=="number":return $.DOUBLE;case t instanceof Int8Array:return $.BYTE_ARRAY;case typeof t=="string":return $.STRING;case t instanceof Array:return $.LIST;case t instanceof Int32Array:return $.INT_ARRAY;case t instanceof BigInt64Array:return $.LONG_ARRAY;case(typeof t=="object"&&t!==null):return $.COMPOUND;default:return null}}async function un(t,{format:e="gzip"}={}){const r=new CompressionStream(e),i=new Blob([t]).stream().pipeThrough(r),s=await new Response(i).arrayBuffer();return new Uint8Array(s)}async function ji(t,{name:e,endian:r,compression:i,bedrockLevel:s}={}){if(t instanceof Ft&&(e===void 0&&(e=t.name),r===void 0&&(r=t.endian),i===void 0&&(i=t.compression),s===void 0&&(s=t.bedrockLevel),t=t.data),typeof t!="object"||t===null)throw new TypeError("First parameter must be an object");if(e!==void 0&&typeof e!="string"&&e!==null)throw new TypeError("Name option must be a string or null");if(r!==void 0&&r!=="big"&&r!=="little")throw new TypeError("Endian option must be a valid endian type");if(i!=null&&i!=="gzip"&&i!=="deflate")throw new TypeError("Compression option must be a valid compression type");if(s!=null&&!(s instanceof ot))throw new TypeError("Bedrock Level option must be an Int");let n=new Hi().write(t,{name:e,endian:r});if(s!=null){const{byteLength:l}=n,c=new Uint8Array(l+8),u=new DataView(c.buffer),B=s.valueOf();u.setUint32(0,B,!0),u.setUint32(4,l,!0),c.set(n,8),n=c}return i==="gzip"&&(n=await un(n,{format:"gzip"})),i==="deflate"&&(n=await un(n,{format:"deflate"})),n}var K,ze,Ce,Fe,rr,Ie,De,Et,Pr,st,St,nr,yn,ir,vn,ar,gn,sr,xn,et,at,Nt,Dr,or,kn,cr,wn,fr,_n,mt,Qt,ur,In,Ct,Lr,lr,Tn,hr,Sn;class Hi{constructor(){se(this,Ie);se(this,Et);se(this,st);se(this,nr);se(this,ir);se(this,ar);se(this,sr);se(this,et);se(this,Nt);se(this,or);se(this,cr);se(this,fr);se(this,mt);se(this,ur);se(this,Ct);se(this,lr);se(this,hr);se(this,K,void 0);se(this,ze,void 0);se(this,Ce,void 0);se(this,Fe,void 0);se(this,rr,new TextEncoder)}write(e,{name:r,endian:i}={}){if(e instanceof Ft&&(r===void 0&&(r=e.name),i===void 0&&(i=e.endian),e=e.data),r===void 0&&(r=""),i===void 0&&(i="big"),typeof e!="object"||e===null)throw new TypeError("First parameter must be an object");if(typeof r!="string"&&r!==null)throw new TypeError("Name option must be a string or null");if(i!=="big"&&i!=="little")throw new TypeError("Endian option must be a valid endian type");return ye(this,K,0),ye(this,ze,i==="little"),ye(this,Ce,new Uint8Array(1024)),ye(this,Fe,new DataView(E(this,Ce).buffer)),M(this,st,St).call(this,$.COMPOUND),r!==null&&M(this,mt,Qt).call(this,r),M(this,Ct,Lr).call(this,e),M(this,Ie,De).call(this,0),E(this,Ce).slice(0,E(this,K))}}K=new WeakMap,ze=new WeakMap,Ce=new WeakMap,Fe=new WeakMap,rr=new WeakMap,Ie=new WeakSet,De=function(e){const r=E(this,K)+e;if(E(this,Ce).byteLength>=r)return;let i=E(this,Ce).byteLength;for(;i<r;)i*=2;const s=new Uint8Array(i);s.set(E(this,Ce),0),E(this,K)>E(this,Ce).byteLength&&s.fill(0,e,E(this,K)),ye(this,Ce,s),ye(this,Fe,new DataView(s.buffer))},Et=new WeakSet,Pr=function(e){switch(Tt(e)){case $.BYTE:return M(this,ir,vn).call(this,Number(e));case $.SHORT:return M(this,sr,xn).call(this,e.valueOf());case $.INT:return M(this,et,at).call(this,e.valueOf());case $.LONG:return M(this,Nt,Dr).call(this,e);case $.FLOAT:return M(this,or,kn).call(this,e.valueOf());case $.DOUBLE:return M(this,cr,wn).call(this,e);case $.BYTE_ARRAY:return M(this,fr,_n).call(this,e);case $.STRING:return M(this,mt,Qt).call(this,e);case $.LIST:return M(this,ur,In).call(this,e);case $.COMPOUND:return M(this,Ct,Lr).call(this,e);case $.INT_ARRAY:return M(this,lr,Tn).call(this,e);case $.LONG_ARRAY:return M(this,hr,Sn).call(this,e)}},st=new WeakSet,St=function(e){M(this,nr,yn).call(this,e)},nr=new WeakSet,yn=function(e){M(this,Ie,De).call(this,1),E(this,Fe).setUint8(E(this,K),e),ye(this,K,E(this,K)+1)},ir=new WeakSet,vn=function(e){M(this,Ie,De).call(this,1),E(this,Fe).setInt8(E(this,K),e),ye(this,K,E(this,K)+1)},ar=new WeakSet,gn=function(e){M(this,Ie,De).call(this,2),E(this,Fe).setUint16(E(this,K),e,E(this,ze)),ye(this,K,E(this,K)+2)},sr=new WeakSet,xn=function(e){M(this,Ie,De).call(this,2),E(this,Fe).setInt16(E(this,K),e,E(this,ze)),ye(this,K,E(this,K)+2)},et=new WeakSet,at=function(e){M(this,Ie,De).call(this,4),E(this,Fe).setInt32(E(this,K),e,E(this,ze)),ye(this,K,E(this,K)+4)},Nt=new WeakSet,Dr=function(e){M(this,Ie,De).call(this,8),E(this,Fe).setBigInt64(E(this,K),e,E(this,ze)),ye(this,K,E(this,K)+8)},or=new WeakSet,kn=function(e){M(this,Ie,De).call(this,4),E(this,Fe).setFloat32(E(this,K),e,E(this,ze)),ye(this,K,E(this,K)+4)},cr=new WeakSet,wn=function(e){M(this,Ie,De).call(this,8),E(this,Fe).setFloat64(E(this,K),e,E(this,ze)),ye(this,K,E(this,K)+8)},fr=new WeakSet,_n=function(e){const{length:r}=e;M(this,et,at).call(this,r),M(this,Ie,De).call(this,r),E(this,Ce).set(e,E(this,K)),ye(this,K,E(this,K)+r)},mt=new WeakSet,Qt=function(e){const r=E(this,rr).encode(e),{length:i}=r;M(this,ar,gn).call(this,i),M(this,Ie,De).call(this,i),E(this,Ce).set(r,E(this,K)),ye(this,K,E(this,K)+i)},ur=new WeakSet,In=function(e){e=e.filter(s=>Tt(s)!==null);const r=e.length!==0?Tt(e[0]):$.END,{length:i}=e;M(this,st,St).call(this,r),M(this,et,at).call(this,i);for(const s of e){if(Tt(s)!==r)throw new TypeError("Encountered unexpected item type in array, all tags in a List tag must be of the same type");M(this,Et,Pr).call(this,s)}},Ct=new WeakSet,Lr=function(e){for(const[r,i]of Object.entries(e)){const s=Tt(i);s!==null&&(M(this,st,St).call(this,s),M(this,mt,Qt).call(this,r),M(this,Et,Pr).call(this,i))}M(this,st,St).call(this,$.END)},lr=new WeakSet,Tn=function(e){const{length:r}=e;M(this,et,at).call(this,r);for(const i of e)M(this,et,at).call(this,i)},hr=new WeakSet,Sn=function(e){const{length:r}=e;M(this,et,at).call(this,r);for(const i of e)M(this,Nt,Dr).call(this,i)};const He=class{constructor(e){Je(this,"name");Je(this,"index");this.name=e,this.index=He.maxTags}static create(e){if(He.palette[e])return He.blocks[He.palette[e].valueOf()];const r=new He(e);return He.maxTags+=1,He.blocks.push(r),He.palette[r.name]=new ot(r.index),r}static get(e){return He.blocks[e]}};let oe=He;Je(oe,"maxTags",0),Je(oe,"blocks",[]),Je(oe,"palette",{});class Vi{constructor(e,r,i){Je(this,"width");Je(this,"height");Je(this,"length");Je(this,"blockData");this.width=new Zt(e),this.height=new Zt(r),this.length=new Zt(i),this.blockData=new Int8Array(e*r*i).fill(0)}positionToIndex(e,r,i){return e+i*this.width.valueOf()+r*this.width.valueOf()*this.length.valueOf()}setBlock(e,r,i,s){this.blockData[this.positionToIndex(e,r,i)]=s.index.valueOf()}getBlock(e,r,i){return this.blockData[this.positionToIndex(e,r,i)]}get Width(){return this.width.valueOf()}get Height(){return this.height.valueOf()}get Length(){return this.length.valueOf()}toNBT(){const e={Version:new ot(2),DataVersion:new ot(2975),Width:this.width,Height:this.height,Length:this.length,BlockData:this.blockData,PaletteMax:new ot(oe.maxTags),Palette:oe.palette};return new Ft(e,{name:"Schematic"})}}const ln=oe.create("minecraft:air"),Rr=oe.create("minecraft:repeater"),Ye=oe.create("minecraft:white_concrete"),Te=oe.create("minecraft:redstone_wire"),jr=oe.create("minecraft:observer[facing=down]"),qi=oe.create("minecraft:powered_rail[shape=east_west]"),Ji=oe.create("minecraft:redstone_block"),Hr=oe.create("minecraft:redstone_lamp"),Gi=oe.create("minecraft:sticky_piston[facing=south]"),Wi=oe.create("minecraft:lever[face=floor]"),zi=[oe.create("minecraft:oak_planks"),oe.create("minecraft:white_wool"),oe.create("minecraft:dirt"),oe.create("minecraft:clay"),oe.create("minecraft:gold_block")],Yi=t=>{for(let e=0;e<t.Width;e++)for(let r=0;r<t.Length;r++)t.setBlock(e,0,r,Ye),t.setBlock(e,6,r,Ye)},Xi=(t,e,r=0)=>{const i=(r+5)%2;for(let s=0;s<t.Length;s++)s>=5&&(s%2==i?(t.setBlock(e+1,1,s,Rr),t.setBlock(e-1,1,s,Rr)):(t.setBlock(e+1,1,s,Hr),t.setBlock(e-1,1,s,Hr)))},Ki=(t,e,r=0)=>{const i=(r+5)%2;for(let s=r+5;s<t.Length;s++)s%2!==i?t.setBlock(e+1,2,s,jr):t.setBlock(e-1,2,s,jr)},$i=(t,e=0)=>{for(let r=e+5;r<t.Length;r++)for(let i=0;i<t.Width;i++)t.setBlock(i,3,r,Ye),t.setBlock(i,4,r,qi),t.setBlock(i,5,r,jr)},Zi=(t,e,r=0)=>{for(let i=r+5;i<t.Length;i++)t.setBlock(e,7,i,Hr)},Qi=(t,e,r=0)=>{Yi(t),Xi(t,e,r),Ki(t,e,r),$i(t,r),Zi(t,e,r)},ea=(t,e,r=0)=>{t.setBlock(e,7,r,Wi),ta(t,e,r),ra(t,e,r),na(t,e,r)},ta=(t,e,r=0)=>{t.setBlock(e,5,r+0,Te),t.setBlock(e,4,r+0,Ye),t.setBlock(e,4,r+1,Te),t.setBlock(e,3,r+1,Ye),t.setBlock(e+1,3,r+1,Te),t.setBlock(e+1,2,r+1,Ye),t.setBlock(e+1,2,r+0,Te),t.setBlock(e+1,1,r+0,Ye)},ra=(t,e,r=0)=>{t.setBlock(e+1,1,r+1,Rr),t.setBlock(e+1,1,r+2,Te),t.setBlock(e+1,1,r+3,Te),t.setBlock(e+1,1,r+4,Te)},na=(t,e,r=0)=>{t.setBlock(e,1,r,Te),t.setBlock(e-1,1,r,Te),t.setBlock(e-2,1,r,Te),t.setBlock(e-2,1,r+1,Ye),t.setBlock(e-2,2,r+1,Te),t.setBlock(e-2,2,r+2,Gi),t.setBlock(e-2,2,r+3,Ye),t.setBlock(e-2,1,r+3,Te),t.setBlock(e-2,0,r+3,Ji),t.setBlock(e-1,1,r+3,Ye),t.setBlock(e-1,2,r+3,Te),t.setBlock(e-1,1,r+4,Te)},Bn=t=>Math.round(t*15),ia=(t,e,r,i,s)=>{let o=e-Math.round(r.velocity*e);const n=Bn(r.time)+s+5,l=oe.create(`minecraft:note_block[note=${r.midi-54}]`),c=o>e/2?-1:1;for(;o>0&&o<=e;){if(t.getBlock(e+o,7,n)===ln.index){t.setBlock(e+o,7,n,l),t.setBlock(e+o,6,n,i);break}else if(t.getBlock(e-o,7,n)===ln.index){t.setBlock(e-o,7,n,l),t.setBlock(e-o,6,n,i);break}o+=c}},aa=(t,e,r,i=0)=>{r.tracks.forEach((s,o)=>{s.notes.forEach(n=>{ia(t,e,n,zi[o],i)})})},sa=(t,e=7,r=5)=>{const i=new Vi(e*2+1,8,Bn(t.duration+1));return Qi(i,e,r),ea(i,e,r),aa(i,e,t,r),i.toNBT()},$t=[6,30,54,78,102,126],oa=t=>{const e=new Bt.Midi;for(let r=0;r<$t.length-1;r++){const i=54-$t[r],s=new Bt.Track([],new Bt.Header);t.tracks.forEach(o=>{o.notes.forEach(n=>{$t[r]<n.midi&&n.midi<$t[r+1]&&(n.midi+=i,s.addNote(n))})}),e.tracks.push(s)}return e};var Vr={},ca={get exports(){return Vr},set exports(t){Vr=t}},Ot={},fa={get exports(){return Ot},set exports(t){Ot=t}};(function(){var t=[],e=3988292384;function r(){var n,l,c;for(l=0;l<256;l+=1){for(n=l,c=0;c<8;c+=1)n&1?n=e^n>>>1:n=n>>>1;t[l]=n>>>0}}function i(n){return Array.prototype.map.call(n,function(l){return l.charCodeAt(0)})}function s(n){var l=-1,c,u,B,w;for(c=0,B=n.length;c<B;c+=1){for(w=(l^n[c])&255,u=0;u<8;u+=1)(w&1)===1?w=w>>>1^e:w=w>>>1;l=l>>>8^w}return l^-1}function o(n,l){var c,u,B;if(!((typeof o.crc>"u"||!l||!n)&&(o.crc=-1,!n))){for(c=o.crc,u=0,B=n.length;u<B;u+=1)c=c>>>8^t[(c^n[u])&255];return o.crc=c,c^-1}}r(),fa.exports=function(c,l){var c=typeof c=="string"?i(c):c,u=l?s(c):o(c);return(u>>>0).toString(16)},Ot.direct=s,Ot.table=o})();var qr={},ua={get exports(){return qr},set exports(t){qr=t}},Jr={},la={get exports(){return Jr},set exports(t){Jr=t}};(function(){var t=32768,e=0,r=1,i=2,s=9,o=6,n,l,c=null,u,B,w,d,x,S,O,k,q,F,P,h,_,U,J,Y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ve=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],Ve=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Me=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function bt(){this.next=null,this.list=null}function ft(){this.e=0,this.b=0,this.n=0,this.t=null}function Xe(R,j,A,p,v,C){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var Se,ce=[],W,te,N,H,g,I,Be,Ue=[],fe,me,Oe,X=new ft,xe=[],Ee=[],ae,re=[],be,de,pe,ue,z;for(z=this.root=null,g=0;g<this.BMAX+1;g++)ce[g]=0;for(g=0;g<this.BMAX+1;g++)Ue[g]=0;for(g=0;g<this.BMAX;g++)xe[g]=null;for(g=0;g<this.N_MAX;g++)Ee[g]=0;for(g=0;g<this.BMAX+1;g++)re[g]=0;W=j>256?R[256]:this.BMAX,fe=R,me=0,g=j;do ce[fe[me]]++,me++;while(--g>0);if(ce[0]===j){this.root=null,this.m=0,this.status=0;return}for(I=1;I<=this.BMAX&&ce[I]===0;I++);for(Be=I,C<I&&(C=I),g=this.BMAX;g!==0&&ce[g]===0;g--);for(N=g,C>g&&(C=g),de=1<<I;I<g;I++,de<<=1)if((de-=ce[I])<0){this.status=2,this.m=C;return}if((de-=ce[g])<0){this.status=2,this.m=C;return}for(ce[g]+=de,re[1]=I=0,fe=ce,me=1,be=2;--g>0;)re[be++]=I+=fe[me++];fe=R,me=0,g=0;do(I=fe[me++])!==0&&(Ee[re[I]++]=g);while(++g<j);for(j=re[N],re[0]=g=0,fe=Ee,me=0,H=-1,ae=Ue[0]=0,Oe=null,pe=0,null;Be<=N;Be++)for(Se=ce[Be];Se-- >0;){for(;Be>ae+Ue[1+H];){if(ae+=Ue[1+H],H++,pe=(pe=N-ae)>C?C:pe,(te=1<<(I=Be-ae))>Se+1)for(te-=Se+1,be=Be;++I<pe&&!((te<<=1)<=ce[++be]);)te-=ce[be];for(ae+I>W&&ae<W&&(I=W-ae),pe=1<<I,Ue[1+H]=I,Oe=[],ue=0;ue<pe;ue++)Oe[ue]=new ft;z?z=z.next=new bt:z=this.root=new bt,z.next=null,z.list=Oe,xe[H]=Oe,H>0&&(re[H]=g,X.b=Ue[H],X.e=16+I,X.t=Oe,I=(g&(1<<ae)-1)>>ae-Ue[H],xe[H-1][I].e=X.e,xe[H-1][I].b=X.b,xe[H-1][I].n=X.n,xe[H-1][I].t=X.t)}for(X.b=Be-ae,me>=j?X.e=99:fe[me]<A?(X.e=fe[me]<256?16:15,X.n=fe[me++]):(X.e=v[fe[me]-A],X.n=p[fe[me++]-A]),te=1<<Be-ae,I=g>>ae;I<pe;I+=te)Oe[I].e=X.e,Oe[I].b=X.b,Oe[I].n=X.n,Oe[I].t=X.t;for(I=1<<Be-1;g&I;I>>=1)g^=I;for(g^=I;(g&(1<<ae)-1)!==re[H];)ae-=Ue[H],H--}this.m=Ue[1],this.status=de!==0&&N!==1?1:0}function Ke(){return U.length===J?-1:U[J++]&255}function L(R){for(;x<R;)d|=Ke()<<x,x+=8}function ie(R){return d&Y[R]}function ee(R){d>>=R,x-=R}function Pe(R,j,A){var p,v,C;if(A===0)return 0;for(C=0;;){for(L(h),v=F.list[ie(h)],p=v.e;p>16;){if(p===99)return-1;ee(v.b),p-=16,L(p),v=v.t[ie(p)],p=v.e}if(ee(v.b),p===16){if(l&=t-1,R[j+C++]=n[l++]=v.n,C===A)return A;continue}if(p===15)break;for(L(p),k=v.n+ie(p),ee(p),L(_),v=P.list[ie(_)],p=v.e;p>16;){if(p===99)return-1;ee(v.b),p-=16,L(p),v=v.t[ie(p)],p=v.e}for(ee(v.b),L(p),q=l-v.n-ie(p),ee(p);k>0&&C<A;)k--,q&=t-1,l&=t-1,R[j+C++]=n[l++]=n[q++];if(C===A)return A}return S=-1,C}function ge(R,j,A){var p;if(p=x&7,ee(p),L(16),p=ie(16),ee(16),L(16),p!==(~d&65535))return-1;for(ee(16),k=p,p=0;k>0&&p<A;)k--,l&=t-1,L(8),R[j+p++]=n[l++]=ie(8),ee(8);return k===0&&(S=-1),p}function he(R,j,A){if(!c){var p,v=[],C;for(p=0;p<144;p++)v[p]=8;for(null;p<256;p++)v[p]=9;for(null;p<280;p++)v[p]=7;for(null;p<288;p++)v[p]=8;if(B=7,C=new Xe(v,288,257,ne,ve,B),C.status!==0)return console.error("HufBuild error: "+C.status),-1;for(c=C.root,B=C.m,p=0;p<30;p++)v[p]=5;if(w=5,C=new Xe(v,30,0,Ve,Me,w),C.status>1)return c=null,console.error("HufBuild error: "+C.status),-1;u=C.root,w=C.m}return F=c,P=u,h=B,_=w,Pe(R,j,A)}function ut(R,j,A){var p,v,C,Se,ce,W,te,N,H=[],g;for(p=0;p<286+30;p++)H[p]=0;if(L(5),te=257+ie(5),ee(5),L(5),N=1+ie(5),ee(5),L(4),W=4+ie(4),ee(4),te>286||N>30)return-1;for(v=0;v<W;v++)L(3),H[Ae[v]]=ie(3),ee(3);for(null;v<19;v++)H[Ae[v]]=0;if(h=7,g=new Xe(H,19,19,null,null,h),g.status!==0)return-1;for(F=g.root,h=g.m,Se=te+N,p=C=0;p<Se;)if(L(h),ce=F.list[ie(h)],v=ce.b,ee(v),v=ce.n,v<16)H[p++]=C=v;else if(v===16){if(L(2),v=3+ie(2),ee(2),p+v>Se)return-1;for(;v-- >0;)H[p++]=C}else if(v===17){if(L(3),v=3+ie(3),ee(3),p+v>Se)return-1;for(;v-- >0;)H[p++]=0;C=0}else{if(L(7),v=11+ie(7),ee(7),p+v>Se)return-1;for(;v-- >0;)H[p++]=0;C=0}if(h=s,g=new Xe(H,te,257,ne,ve,h),h===0&&(g.status=1),g.status!==0&&g.status!==1)return-1;for(F=g.root,h=g.m,p=0;p<N;p++)H[p]=H[p+te];return _=o,g=new Xe(H,N,0,Ve,Me,_),P=g.root,_=g.m,_===0&&te>257||g.status!==0?-1:Pe(R,j,A)}function Z(){n||(n=[]),l=0,d=0,x=0,S=-1,O=!1,k=q=0,F=null}function yt(R,j,A){var p,v;for(p=0;p<A;){if(O&&S===-1)return p;if(k>0){if(S!==e)for(;k>0&&p<A;)k--,q&=t-1,l&=t-1,R[j+p++]=n[l++]=n[q++];else{for(;k>0&&p<A;)k--,l&=t-1,L(8),R[j+p++]=n[l++]=ie(8),ee(8);k===0&&(S=-1)}if(p===A)return p}if(S===-1){if(O)break;L(1),ie(1)!==0&&(O=!0),ee(1),L(2),S=ie(2),ee(2),F=null,k=0}switch(S){case e:v=ge(R,j+p,A-p);break;case r:F?v=Pe(R,j+p,A-p):v=he(R,j+p,A-p);break;case i:F?v=Pe(R,j+p,A-p):v=ut(R,j+p,A-p);break;default:v=-1;break}if(v===-1)return O?0:-1;p+=v}return p}function vt(R){var j=[],A;Z(),U=R,J=0;do A=yt(j,j.length,1024);while(A>0);return U=null,j}la.exports=vt})();var tr={},ha={get exports(){return tr},set exports(t){tr=t}};(function(){var t=32768,e=0,r=1,i=2,s=6,o=1024*8,n=2*t,l=3,c=258,u=8192,B=15,w=u,d=1<<B,x=d-1,S=t-1,O=0,k=4096,q=c+l+1,F=t-q,P=1,h=15,_=7,U=29,J=256,Y=256,ne=J+1+U,ve=30,Ve=19,Me=16,Ae=17,bt=18,ft=2*ne+1,Xe=parseInt((B+l-1)/l,10),Ke,L,ie,ee,Pe=null,ge,he,ut,Z,yt,vt,R,j,A,p,v,C,Se,ce,W,te,N,H,g,I,Be,Ue,fe,me,Oe,X,xe,Ee,ae,re,be,de,pe,ue,z,$e,lt,je,gt,xt,wr,Mt,At,Ze,Pt,_r,kt,Dt,ht,Lt,Rt,Ir;function wt(){this.fc=0,this.dl=0}function Tr(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function qe(a,f,y,m){this.good_length=a,this.max_lazy=f,this.nice_length=y,this.max_chain=m}function Un(){this.next=null,this.len=0,this.ptr=[],this.off=0}var Sr=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_t=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],On=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Wr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],jt=[new qe(0,0,0,0),new qe(4,4,8,4),new qe(4,5,16,8),new qe(4,6,32,32),new qe(4,4,16,16),new qe(8,16,32,32),new qe(8,16,128,128),new qe(8,32,128,256),new qe(32,128,258,1024),new qe(32,258,258,4096)];function En(a){var f;if(a?a<1?a=1:a>9&&(a=9):a=s,fe=a,ee=!1,g=!1,Pe===null){for(Ke=L=ie=null,Pe=[],Z=[],yt=[],vt=[],R=[],X=[],f=0;f<ft;f++)X[f]=new wt;for(xe=[],f=0;f<2*ve+1;f++)xe[f]=new wt;for(Ee=[],f=0;f<ne+2;f++)Ee[f]=new wt;for(ae=[],f=0;f<ve;f++)ae[f]=new wt;for(re=[],f=0;f<2*Ve+1;f++)re[f]=new wt;be=new Tr,de=new Tr,pe=new Tr,ue=[],z=[],je=[],gt=[],xt=[],wr=[],Mt=[],At=[]}}function Nn(a){a.next=Ke,Ke=a}function Cn(){var a;return Ke!==null?(a=Ke,Ke=Ke.next):a=new Un,a.next=null,a.len=a.off=0,a}function zr(a){return R[t+a]}function Yr(a,f){return R[t+a]=f}function Ht(a){Pe[he+ge++]=a,he+ge===o&&Vn()}function Vt(a){a&=65535,he+ge<o-2?(Pe[he+ge++]=a&255,Pe[he+ge++]=a>>>8):(Ht(a&255),Ht(a>>>8))}function qt(){v=(v<<Xe^Z[N+l-1]&255)&x,C=zr(v),R[N&S]=C,Yr(v,N)}function Qe(a,f){Ne(f[a].fc,f[a].dl)}function Xr(a){return(a<256?xt[a]:xt[256+(a>>7)])&255}function Kr(a,f,y){return a[f].fc<a[y].fc||a[f].fc===a[y].fc&&je[f]<=je[y]}function $r(a,f,y){var m;for(m=0;m<y&&Ir<Rt.length;m++)a[f+m]=Rt[Ir++]&255;return m}function Fn(){var a;for(a=0;a<d;a++)R[t+a]=0;if(Ue=jt[fe].max_lazy,me=jt[fe].good_length,Oe=jt[fe].nice_length,Be=jt[fe].max_chain,N=0,p=0,I=$r(Z,0,2*t),I<=0){g=!0,I=0;return}for(g=!1;I<q&&!g;)Br();for(v=0,a=0;a<l-1;a++)v=(v<<Xe^Z[a]&255)&x}function Zr(a){var f=Be,y=N,m,b,T=te,V=N>F?N-F:O,G=N+c,D=Z[y+T-1],ke=Z[y+T],Q,tt;te>=me&&(f>>=2);do if(m=a,!(Z[m+T]!==ke||Z[m+T-1]!==D||Z[m]!==Z[y]||Z[++m]!==Z[y+1])){for(y+=2,m++;y<G;){for(tt=!1,Q=0;Q<8;Q+=1)if(y+=1,m+=1,Z[y]!==Z[m]){tt=!0;break}if(tt)break}if(b=c-(G-y),y=G-c,b>T){if(H=a,T=b,b>=Oe)break;D=Z[y+T-1],ke=Z[y+T]}}while((a=R[a&S])>V&&--f!==0);return T}function Br(){var a,f,y=n-I-N;if(y===-1)y--;else if(N>=t+F){for(a=0;a<t;a++)Z[a]=Z[a+t];for(H-=t,N-=t,p-=t,a=0;a<d;a++)f=zr(a),Yr(a,f>=t?f-t:O);for(a=0;a<t;a++)f=R[a],R[a]=f>=t?f-t:O;y+=t}g||(a=$r(Z,N+I,y),a<=0?g=!0:I+=a)}function Mn(){for(;I!==0&&L===null;){var a;if(qt(),C!==O&&N-C<=F&&(W=Zr(C),W>I&&(W=I)),W>=l)if(a=It(N-H,W-l),I-=W,W<=Ue){W--;do N++,qt();while(--W!==0);N++}else N+=W,W=0,v=Z[N]&255,v=(v<<Xe^Z[N+1]&255)&x;else a=It(0,Z[N]&255),I--,N++;for(a&&(Jt(0),p=N);I<q&&!g;)Br()}}function An(){for(;I!==0&&L===null;){if(qt(),te=W,Se=H,W=l-1,C!==O&&te<Ue&&N-C<=F&&(W=Zr(C),W>I&&(W=I),W===l&&N-H>k&&W--),te>=l&&W<=te){var a;a=It(N-1-Se,te-l),I-=te-1,te-=2;do N++,qt();while(--te!==0);ce=!1,W=l-1,N++,a&&(Jt(0),p=N)}else ce?(It(0,Z[N-1]&255)&&(Jt(0),p=N),N++,I--):(ce=!0,N++,I--);for(;I<q&&!g;)Br()}}function Pn(){g||(j=0,A=0,Ln(),Fn(),L=null,ge=0,he=0,fe<=3?(te=l-1,W=0):(W=l-1,ce=!1),ut=!1)}function Dn(a,f,y){var m;return!ee&&(Pn(),ee=!0,I===0)?(ut=!0,0):(m=Qr(a,f,y),m===y?y:ut?m:(fe<=3?Mn():An(),I===0&&(ce&&It(0,Z[N-1]&255),Jt(1),ut=!0),m+Qr(a,m+f,y-m)))}function Qr(a,f,y){var m,b,T;for(m=0;L!==null&&m<y;){for(b=y-m,b>L.len&&(b=L.len),T=0;T<b;T++)a[f+m+T]=L.ptr[L.off+T];if(L.off+=b,L.len-=b,m+=b,L.len===0){var V;V=L,L=L.next,Nn(V)}}if(m===y)return m;if(he<ge){for(b=y-m,b>ge-he&&(b=ge-he),T=0;T<b;T++)a[f+m+T]=Pe[he+T];he+=b,m+=b,ge===he&&(ge=he=0)}return m}function Ln(){var a,f,y,m,b;if(ae[0].dl===0){for(be.dyn_tree=X,be.static_tree=Ee,be.extra_bits=Sr,be.extra_base=J+1,be.elems=ne,be.max_length=h,be.max_code=0,de.dyn_tree=xe,de.static_tree=ae,de.extra_bits=_t,de.extra_base=0,de.elems=ve,de.max_length=h,de.max_code=0,pe.dyn_tree=re,pe.static_tree=null,pe.extra_bits=On,pe.extra_base=0,pe.elems=Ve,pe.max_length=_,pe.max_code=0,y=0,m=0;m<U-1;m++)for(wr[m]=y,a=0;a<1<<Sr[m];a++)gt[y++]=m;for(gt[y-1]=m,b=0,m=0;m<16;m++)for(Mt[m]=b,a=0;a<1<<_t[m];a++)xt[b++]=m;for(b>>=7;m<ve;m++)for(Mt[m]=b<<7,a=0;a<1<<_t[m]-7;a++)xt[256+b++]=m;for(f=0;f<=h;f++)ue[f]=0;for(a=0;a<=143;)Ee[a++].dl=8,ue[8]++;for(;a<=255;)Ee[a++].dl=9,ue[9]++;for(;a<=279;)Ee[a++].dl=7,ue[7]++;for(;a<=287;)Ee[a++].dl=8,ue[8]++;for(tn(Ee,ne+1),a=0;a<ve;a++)ae[a].dl=5,ae[a].fc=sn(a,5);en()}}function en(){var a;for(a=0;a<ne;a++)X[a].fc=0;for(a=0;a<ve;a++)xe[a].fc=0;for(a=0;a<Ve;a++)re[a].fc=0;X[Y].fc=1,ht=Lt=0,Ze=Pt=_r=0,kt=0,Dt=1}function Ur(a,f){for(var y=z[f],m=f<<1;m<=$e&&(m<$e&&Kr(a,z[m+1],z[m])&&m++,!Kr(a,y,z[m]));)z[f]=z[m],f=m,m<<=1;z[f]=y}function Rn(a){var f=a.dyn_tree,y=a.extra_bits,m=a.extra_base,b=a.max_code,T=a.max_length,V=a.static_tree,G,D,ke,Q,tt,Nr,Gt=0;for(Q=0;Q<=h;Q++)ue[Q]=0;for(f[z[lt]].dl=0,G=lt+1;G<ft;G++)D=z[G],Q=f[f[D].dl].dl+1,Q>T&&(Q=T,Gt++),f[D].dl=Q,!(D>b)&&(ue[Q]++,tt=0,D>=m&&(tt=y[D-m]),Nr=f[D].fc,ht+=Nr*(Q+tt),V!==null&&(Lt+=Nr*(V[D].dl+tt)));if(Gt!==0){do{for(Q=T-1;ue[Q]===0;)Q--;ue[Q]--,ue[Q+1]+=2,ue[T]--,Gt-=2}while(Gt>0);for(Q=T;Q!==0;Q--)for(D=ue[Q];D!==0;)ke=z[--G],!(ke>b)&&(f[ke].dl!==Q&&(ht+=(Q-f[ke].dl)*f[ke].fc,f[ke].fc=Q),D--)}}function tn(a,f){var y=[],m=0,b,T;for(b=1;b<=h;b++)m=m+ue[b-1]<<1,y[b]=m;for(T=0;T<=f;T++){var V=a[T].dl;V!==0&&(a[T].fc=sn(y[V]++,V))}}function Or(a){var f=a.dyn_tree,y=a.static_tree,m=a.elems,b,T,V=-1,G=m;for($e=0,lt=ft,b=0;b<m;b++)f[b].fc!==0?(z[++$e]=V=b,je[b]=0):f[b].dl=0;for(;$e<2;){var D=z[++$e]=V<2?++V:0;f[D].fc=1,je[D]=0,ht--,y!==null&&(Lt-=y[D].dl)}for(a.max_code=V,b=$e>>1;b>=1;b--)Ur(f,b);do b=z[P],z[P]=z[$e--],Ur(f,P),T=z[P],z[--lt]=b,z[--lt]=T,f[G].fc=f[b].fc+f[T].fc,je[b]>je[T]+1?je[G]=je[b]:je[G]=je[T]+1,f[b].dl=f[T].dl=G,z[P]=G++,Ur(f,P);while($e>=2);z[--lt]=z[P],Rn(a),tn(f,V)}function rn(a,f){var y,m=-1,b,T=a[0].dl,V=0,G=7,D=4;for(T===0&&(G=138,D=3),a[f+1].dl=65535,y=0;y<=f;y++)b=T,T=a[y+1].dl,!(++V<G&&b===T)&&(V<D?re[b].fc+=V:b!==0?(b!==m&&re[b].fc++,re[Me].fc++):V<=10?re[Ae].fc++:re[bt].fc++,V=0,m=b,T===0?(G=138,D=3):b===T?(G=6,D=3):(G=7,D=4))}function nn(a,f){var y,m=-1,b,T=a[0].dl,V=0,G=7,D=4;for(T===0&&(G=138,D=3),y=0;y<=f;y++)if(b=T,T=a[y+1].dl,!(++V<G&&b===T)){if(V<D)do Qe(b,re);while(--V!==0);else b!==0?(b!==m&&(Qe(b,re),V--),Qe(Me,re),Ne(V-3,2)):V<=10?(Qe(Ae,re),Ne(V-3,3)):(Qe(bt,re),Ne(V-11,7));V=0,m=b,T===0?(G=138,D=3):b===T?(G=6,D=3):(G=7,D=4)}}function jn(){var a;for(rn(X,be.max_code),rn(xe,de.max_code),Or(pe),a=Ve-1;a>=3&&re[Wr[a]].dl===0;a--);return ht+=3*(a+1)+5+5+4,a}function Hn(a,f,y){var m;for(Ne(a-257,5),Ne(f-1,5),Ne(y-4,4),m=0;m<y;m++)Ne(re[Wr[m]].dl,3);nn(X,a-1),nn(xe,f-1)}function Jt(a){var f,y,m,b,T;if(b=N-p,At[_r]=kt,Or(be),Or(de),m=jn(),f=ht+3+7>>3,y=Lt+3+7>>3,y<=f&&(f=y),b+4<=f&&p>=0)for(Ne((e<<1)+a,3),on(),Vt(b),Vt(~b),T=0;T<b;T++)Ht(Z[p+T]);else y===f?(Ne((r<<1)+a,3),an(Ee,ae)):(Ne((i<<1)+a,3),Hn(be.max_code+1,de.max_code+1,m+1),an(X,xe));en(),a!==0&&on()}function It(a,f){if(vt[Ze++]=f,a===0?X[f].fc++:(a--,X[gt[f]+J+1].fc++,xe[Xr(a)].fc++,yt[Pt++]=a,kt|=Dt),Dt<<=1,Ze&7||(At[_r++]=kt,kt=0,Dt=1),fe>2&&!(Ze&4095)){var y=Ze*8,m=N-p,b;for(b=0;b<ve;b++)y+=xe[b].fc*(5+_t[b]);if(y>>=3,Pt<parseInt(Ze/2,10)&&y<parseInt(m/2,10))return!0}return Ze===u-1||Pt===w}function an(a,f){var y,m,b=0,T=0,V=0,G=0,D,ke;if(Ze!==0)do b&7||(G=At[V++]),m=vt[b++]&255,G&1?(D=gt[m],Qe(D+J+1,a),ke=Sr[D],ke!==0&&(m-=wr[D],Ne(m,ke)),y=yt[T++],D=Xr(y),Qe(D,f),ke=_t[D],ke!==0&&(y-=Mt[D],Ne(y,ke))):Qe(m,a),G>>=1;while(b<Ze);Qe(Y,a)}var Er=16;function Ne(a,f){A>Er-f?(j|=a<<A,Vt(j),j=a>>Er-A,A+=f-Er):(j|=a<<A,A+=f)}function sn(a,f){var y=0;do y|=a&1,a>>=1,y<<=1;while(--f>0);return y>>1}function on(){A>8?Vt(j):A>0&&Ht(j),j=0,A=0}function Vn(){var a,f;if(ge!==0){for(a=Cn(),L===null?L=ie=a:ie=ie.next=a,a.len=ge-he,f=0;f<a.len;f++)a.ptr[f]=Pe[he+f];ge=he=0}}function qn(a,f){var y,m;Rt=a,Ir=0,typeof f>"u"&&(f=s),En(f),m=[];do y=Dn(m,m.length,1024);while(y>0);return Rt=null,m}ha.exports=qn,tr.DEFAULT_LEVEL=s})();(function(){ua.exports={inflate:Jr,deflate:tr}})();(function(){var t=Ot,e=qr,r=31,i=139,s={deflate:8},o={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},n={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18},l="unix",c=6;function u(h,_){_.push(h&255)}function B(h,_){_.push(h&255),_.push(h>>>8)}function w(h,_){B(h&65535,_),B(h>>>16,_)}function d(h,_){var U,J=h.length;for(U=0;U<J;U+=1)u(h.charCodeAt(U),_)}function x(h){return h.shift()}function S(h){return h.shift()|h.shift()<<8}function O(h){var _=S(h),U=S(h);return U>32768?(U-=32768,(U<<16|_)+32768*Math.pow(2,16)):U<<16|_}function k(h){for(var _=[];h[0]!==0;)_.push(String.fromCharCode(h.shift()));return h.shift(),_.join("")}function q(h,_){var U,J=[];for(U=0;U<_;U+=1)J.push(h.shift());return J}function F(h,_){var U=0,J,Y=[];return _||(_={}),J=_.level||c,typeof h=="string"&&(h=Array.prototype.map.call(h,function(ne){return ne.charCodeAt(0)})),u(r,Y),u(i,Y),u(s.deflate,Y),_.name&&(U|=o.FNAME),u(U,Y),w(_.timestamp||parseInt(Date.now()/1e3,10),Y),u(J===1?4:J===9?2:0,Y),u(n[l],Y),_.name&&(d(_.name.substring(_.name.lastIndexOf("/")+1),Y),u(0,Y)),e.deflate(h,J).forEach(function(ne){u(ne,Y)}),w(parseInt(t(h),16),Y),w(h.length,Y),Y}function P(h,_){var U=Array.prototype.slice.call(h,0),J,Y,ne,ve,Ve,Me;if(x(U)!==r||x(U)!==i)throw"Not a GZIP file";if(J=x(U),J=Object.keys(s).some(function(Ae){return Y=Ae,s[Ae]===J}),!J)throw"Unsupported compression method";if(ne=x(U),O(U),x(U),J=x(U),Object.keys(n).some(function(Ae){if(n[Ae]===J)return!0}),ne&o.FEXTRA&&(J=S(U),q(U,J)),ne&o.FNAME&&k(U),ne&o.FCOMMENT&&k(U),ne&o.FHCRC&&S(U),Y==="deflate"&&(Me=e.inflate(U.splice(0,U.length-8))),ne&o.FTEXT&&(Me=Array.prototype.map.call(Me,function(Ae){return String.fromCharCode(Ae)}).join("")),ve=O(U),ve!==parseInt(t(Me),16))throw"Checksum does not match";if(Ve=O(U),Ve!==Me.length)throw"Size of decompressed file not correct";return Me}ca.exports={zip:F,unzip:P,get DEFAULT_LEVEL(){return c}}})();function da(t){let e=t[1].name+"",r;return{c(){r=dr(e)},l(i){r=pr(i,e)},m(i,s){mr(i,r,s)},p(i,s){s&2&&e!==(e=i[1].name+"")&&Xn(r,e)},d(i){i&&Re(r)}}}function pa(t){let e;return{c(){e=dr("Upload a file")},l(r){e=pr(r,"Upload a file")},m(r,i){mr(r,e,i)},p:Ar,d(r){r&&Re(e)}}}function hn(t){let e,r,i,s,o,n;return{c(){e=Ge("div"),r=Ge("button"),i=dr("Create"),this.h()},l(l){e=We(l,"DIV",{class:!0});var c=nt(e);r=We(c,"BUTTON",{class:!0});var u=nt(r);i=pr(u,"Create"),u.forEach(Re),c.forEach(Re),this.h()},h(){Le(r,"class","px-4 py-2 bg-perlwinkle rounded text-2xl shadow-bistre shadow-sm"),r.disabled=s=!t[1],Le(e,"class","text-center")},m(l,c){mr(l,e,c),_e(e,r),_e(r,i),o||(n=dn(r,"click",t[2]),o=!0)},p(l,c){c&2&&s!==(s=!l[1])&&(r.disabled=s)},d(l){l&&Re(e),o=!1,n()}}}function ma(t){let e,r,i,s,o,n,l,c,u,B,w,d,x,S,O;function k(h,_){return h[1]===void 0?pa:da}let q=k(t),F=q(t),P=t[1]!==void 0&&hn(t);return{c(){e=Ge("div"),r=Ge("div"),i=Ge("h1"),s=dr("Create Schematic File"),o=Wt(),n=Ge("br"),l=Wt(),c=Ge("div"),u=Ge("label"),B=Ge("div"),F.c(),w=Wt(),d=Ge("input"),x=Wt(),P&&P.c(),this.h()},l(h){e=We(h,"DIV",{class:!0});var _=nt(e);r=We(_,"DIV",{class:!0});var U=nt(r);i=We(U,"H1",{class:!0});var J=nt(i);s=pr(J,"Create Schematic File"),J.forEach(Re),o=zt(U),n=We(U,"BR",{}),l=zt(U),c=We(U,"DIV",{class:!0});var Y=nt(c);u=We(Y,"LABEL",{for:!0,class:!0});var ne=nt(u);B=We(ne,"DIV",{class:!0});var ve=nt(B);F.l(ve),ve.forEach(Re),w=zt(ne),d=We(ne,"INPUT",{id:!0,type:!0,accept:!0}),ne.forEach(Re),x=zt(Y),P&&P.l(Y),Y.forEach(Re),U.forEach(Re),_.forEach(Re),this.h()},h(){Le(i,"class","text-4xl"),Le(B,"class","text-4xl"),Le(d,"id","file"),Le(d,"type","file"),Le(d,"accept",".mid,.midi"),d.hidden=!0,Le(u,"for","file"),Le(u,"class","inline-block border-dashed border-2 border-bistre cursor-pointer p-2 text-center bg-tea"),Le(c,"class","grid content-center space-y-8"),Le(r,"class","my-8"),Le(e,"class","mx-auto container")},m(h,_){mr(h,e,_),_e(e,r),_e(r,i),_e(i,s),_e(r,o),_e(r,n),_e(r,l),_e(r,c),_e(c,u),_e(u,B),F.m(B,null),_e(u,w),_e(u,d),_e(c,x),P&&P.m(c,null),S||(O=dn(d,"change",t[3]),S=!0)},p(h,[_]){q===(q=k(h))&&F?F.p(h,_):(F.d(1),F=q(h),F&&(F.c(),F.m(B,null))),h[1]!==void 0?P?P.p(h,_):(P=hn(h),P.c(),P.m(c,null)):P&&(P.d(1),P=null)},i:Ar,o:Ar,d(h){h&&Re(e),F.d(),P&&P.d(),S=!1,O()}}}function ba(t,e,r){let i,s;const o=(c,u)=>{const B=new Blob([c]),w=document.createElement("a"),d=URL.createObjectURL(B);w.href=d,w.download=u,document.body.appendChild(w),w.click(),setTimeout(function(){document.body.removeChild(w),window.URL.revokeObjectURL(d)},0)},n=async()=>{if(!i){console.log("No file was selected");return}const c=i.name.split(".")[0],u=await i.arrayBuffer(),B=oa(new Bt.Midi(u)),w=sa(B),d=await ji(w);o(new Uint8Array(Vr.zip(d)),`${c}.schem`)};function l(){s=this.files,r(0,s)}return t.$$.update=()=>{t.$$.dirty&1&&r(1,i=s&&s[0])},[s,i,n,l]}class ga extends Wn{constructor(e){super(),zn(this,e,ba,ma,Yn,{})}}export{ga as default};
